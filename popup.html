<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Font Face-off</title>
    <link rel="stylesheet" href="popup.css">

</head>
<body>
    <!-- Panel overlay -->
    <div id="panel-overlay" class="panel-overlay"></div>

    <!-- Save Modal -->
    <div id="save-modal" class="save-modal">
        <div class="save-modal-content">
            <div class="save-modal-header">
                <h3>Save Font Configuration</h3>
                <button id="save-modal-close" class="save-modal-close">&times;</button>
            </div>
            <div class="save-modal-body">
                <label for="save-modal-name">Favorite Name:</label>
                <input type="text" id="save-modal-name" class="save-modal-input" placeholder="Enter name...">
                <div class="save-modal-preview">
                    <strong>Configuration:</strong>
                    <div id="save-modal-config"></div>
                </div>
            </div>
            <div class="save-modal-footer">
                <button id="save-modal-cancel" class="save-modal-btn cancel-btn">Cancel</button>
                <button id="save-modal-save" class="save-modal-btn save-btn">Save</button>
            </div>
        </div>
    </div>

    <!-- Favorites Load Popup -->
    <div id="favorites-popup" class="favorites-popup">
        <div class="favorites-popup-content">
            <div class="favorites-popup-header">
                <h3>Load Favorite</h3>
                <button id="favorites-popup-close" class="popup-close">&times;</button>
            </div>
            <div class="favorites-popup-body">
                <div id="favorites-popup-list" class="favorites-list-container">
                    <!-- Favorites will be populated here -->
                </div>
                <div class="no-favorites" id="no-favorites" style="display: none;">
                    No saved favorites yet.
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Favorites Modal -->
    <div id="edit-favorites-modal" class="edit-modal">
        <div class="edit-modal-content">
            <div class="edit-modal-header">
                <h3>Edit Favorites</h3>
                <button id="edit-modal-close" class="popup-close">&times;</button>
            </div>
            <div class="edit-modal-body">
                <div id="edit-favorites-list" class="edit-favorites-container">
                    <!-- Editable favorites will be populated here -->
                </div>
                <div class="no-favorites" id="no-edit-favorites" style="display: none;">
                    No saved favorites to edit.
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Alert Modal -->
    <div id="custom-alert" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-message" id="custom-alert-message">
                <!-- Alert message will be inserted here -->
            </div>
            <div class="custom-alert-footer">
                <button id="custom-alert-ok" class="custom-alert-btn">OK</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirm Modal -->
    <div id="custom-confirm" class="custom-alert">
        <div class="custom-alert-content">
            <div class="custom-alert-message" id="custom-confirm-message">
                <!-- Confirm message will be inserted here -->
            </div>
            <div class="custom-alert-footer">
                <button id="custom-confirm-cancel" class="custom-alert-btn custom-confirm-cancel">Cancel</button>
                <button id="custom-confirm-ok" class="custom-alert-btn custom-confirm-ok">OK</button>
            </div>
        </div>
    </div>

    <!-- Mode tabs -->
    <div id="mode-tabs">
        <div class="center-line"></div>
        <div class="goal-line-left"></div>
        <div class="goal-line-right"></div>
        <div class="goal-crease-left"></div>
        <div class="goal-crease-right"></div>
        <div class="goal-box-left"></div>
        <div class="goal-box-right"></div>
        <button class="mode-tab" data-mode="body-contact">Body Contact</button>
        <button class="mode-tab" data-mode="faceoff">
            <span class="faceoff-circle" aria-hidden="true"></span>
            <span class="face-text">FACE</span>
            <span class="faceoff-dot">‚óè</span>
            <span class="off-text">OFF</span>
        </button>
        <button class="mode-tab" data-mode="third-man-in">Third Man In</button>
    </div>

    <!-- Panel control grips and favorites at bottom -->
    <div id="panel-grips">
        <!-- Body Contact mode: single grip -->
        <div class="mode-content body-contact-content">
            <div class="grip-area invisible-grip" id="out-of-body-grip">
                <div class="grip-handle">‚â°</div>
                <span class="grip-label">Out of Body</span>
            </div>
            <div class="favorites-container">
                <div class="favorites-edit-section">
                    <button id="edit-favorites-body" class="favorite-btn edit-btn" title="Edit favorites">‚úèÔ∏è</button>
                </div>
            </div>
            <div class="grip-area" id="body-font-grip" data-panel="body">
                <div class="grip-handle">‚â°</div>
                <span class="grip-label">Body</span>
            </div>
        </div>

        <!-- Face-off mode: existing two grips -->
        <div class="mode-content faceoff-content">
            <div class="grip-area" id="top-font-grip" data-panel="top">
                <div class="grip-handle">‚â°</div>
                <span class="grip-label">Top Font</span>
            </div>
            <div class="favorites-container">
                <div class="favorites-edit-section">
                    <button id="edit-favorites" class="favorite-btn edit-btn" title="Edit favorites">‚úèÔ∏è</button>
                </div>
            </div>
            <div class="grip-area" id="bottom-font-grip" data-panel="bottom">
                <div class="grip-handle">‚â°</div>
                <span class="grip-label">Bottom Font</span>
            </div>
        </div>

        <!-- Third Man In mode: serif, centered mono, sans, edit fav -->
        <div class="mode-content third-man-in-content">
            <div class="grip-area" id="serif-font-grip" data-panel="serif">
                <div class="grip-handle">‚â°</div>
                <span class="grip-label">Serif</span>
            </div>
            <div class="third-man-in-center-stack">
                <button id="edit-favorites-tmi" class="favorite-btn edit-btn" title="Edit favorites">‚úèÔ∏è</button>
                <div class="grip-area centered-grip" id="mono-font-grip" data-panel="mono">
                    <div class="grip-handle">‚â°</div>
                    <span class="grip-label">Mono</span>
                </div>
            </div>
            <div class="grip-area" id="sans-font-grip" data-panel="sans">
                <div class="grip-handle">‚â°</div>
                <span class="grip-label">Sans</span>
            </div>
        </div>
    </div>

    <!-- Top Font Control Panel -->
    <div id="top-font-controls" class="controls-panel">
        <h2>Top Font</h2>

        <div class="panel-body">
        <!-- Font Selector -->
        <div class="control-section">
            <h3>Font Selection</h3>
            <div class="control-group">
                <label for="top-font-display">Font Family:</label>
                <div class="control-row input-row">
                    <span id="top-family-reset" class="family-reset-btn" title="Use site default">‚Üª</span>
                    <div id="top-font-display" class="font-family-display" tabindex="0" role="combobox" aria-haspopup="listbox" aria-controls="font-picker-list" aria-expanded="false">ABeeZee</div>
                </div>
            </div>
            <!-- Favorites controls moved to persistent footer -->
        </div>

        <!-- Basic Font Properties -->
        <div class="control-section">
            <h3>Basic Properties</h3>
            <div class="control-group unset" data-control="font-size">
                <label for="top-font-size">Font Size:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="font-size" title="Reset font size">‚Üª</span>
                    <input type="text" id="top-font-size-text" class="size-text-input numeric-trigger" readonly value="17" aria-label="Top font size in pixels (e.g., 16 or 16px)" data-type="fontSize" data-position="top">
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="top-font-size" min="10" max="72" step="0.01" value="17">
                </div>
            </div>
            <div class="control-group unset" data-control="line-height">
                <label for="top-line-height">Line Height:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="line-height" title="Reset to default">‚Üª</span>
                    <span id="top-line-height-value" class="axis-readonly-input" aria-live="polite">1.6</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="top-line-height" min="1" max="3" step="0.1" value="1.6">
                </div>
            </div>
            <div class="control-group unset" data-control="weight">
                <label for="top-font-weight">Weight:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="weight" title="Reset weight">‚Üª</span>
                    <span id="top-font-weight-value" class="axis-readonly-input" aria-live="polite">400</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="top-font-weight" min="100" max="900" step="100" value="400">
                </div>
            </div>
            <div class="control-group">
                <label for="top-font-color">Color:</label>
                <select id="top-font-color">
                    <option value="#000000" selected>100% Black</option>
                    <option value="#1A1A1A">90% Gray</option>
                    <option value="#333333">80% Gray</option>
                    <option value="#4D4D4D">70% Gray</option>
                    <option value="#666666">60% Gray</option>
                    <option value="#CCCCCC">20% Gray</option>
                    <option value="#FF0000">Bright Red</option>
                </select>
            </div>
        </div>


        <!-- Dynamic Variable Axes -->
        <div id="top-axes-section" class="control-section">
            <h3>Variable Axes</h3>
            <div class="control-group">
                <label for="roboto-wght">Weight: <span class="axis-tag">(wght)</span></label>
                <input type="range" id="roboto-wght" min="100" max="1000" value="400">
                <span id="roboto-wght-value">400</span>
            </div>
            <div class="control-group">
                <label for="roboto-wdth">Width: <span class="axis-tag">(wdth)</span></label>
                <input type="range" id="roboto-wdth" min="25" max="151" value="100">
                <span id="roboto-wdth-value">100%</span>
            </div>
            <div class="control-group">
                <label for="roboto-opsz">Optical Size: <span class="axis-tag">(opsz)</span></label>
                <input type="range" id="roboto-opsz" min="8" max="144" step="0.1" value="14">
                <span id="roboto-opsz-value">14pt</span>
            </div>
            <div class="control-group">
                <label for="roboto-GRAD">Grade: <span class="axis-tag">(GRAD)</span></label>
                <input type="range" id="roboto-GRAD" min="-200" max="150" value="0">
                <span id="roboto-GRAD-value">0</span>
            </div>
            <div class="control-group">
                <label for="roboto-slnt">Slant: <span class="axis-tag">(slnt)</span></label>
                <input type="range" id="roboto-slnt" min="-10" max="0" value="0">
                <span id="roboto-slnt-value">0¬∞</span>
            </div>
            <div class="control-group">
                <label for="roboto-XTRA">X Transparent: <span class="axis-tag">(XTRA)</span></label>
                <input type="range" id="roboto-XTRA" min="323" max="603" value="468">
                <span id="roboto-XTRA-value">468</span>
            </div>
            <div class="control-group">
                <label for="roboto-XOPQ">X Opaque: <span class="axis-tag">(XOPQ)</span></label>
                <input type="range" id="roboto-XOPQ" min="27" max="175" value="96">
                <span id="roboto-XOPQ-value">96</span>
            </div>
            <div class="control-group">
                <label for="roboto-YOPQ">Y Opaque: <span class="axis-tag">(YOPQ)</span></label>
                <input type="range" id="roboto-YOPQ" min="25" max="135" value="79">
                <span id="roboto-YOPQ-value">79</span>
            </div>
            <div class="control-group">
                <label for="roboto-YTLC">Y Transparent Lowercase: <span class="axis-tag">(YTLC)</span></label>
                <input type="range" id="roboto-YTLC" min="416" max="570" value="514">
                <span id="roboto-YTLC-value">514</span>
            </div>
            <div class="control-group">
                <label for="roboto-YTUC">Y Transparent Uppercase: <span class="axis-tag">(YTUC)</span></label>
                <input type="range" id="roboto-YTUC" min="528" max="760" value="712">
                <span id="roboto-YTUC-value">712</span>
            </div>
            <div class="control-group">
                <label for="roboto-YTAS">Y Transparent Ascenders: <span class="axis-tag">(YTAS)</span></label>
                <input type="range" id="roboto-YTAS" min="649" max="854" value="750">
                <span id="roboto-YTAS-value">750</span>
            </div>
            <div class="control-group">
                <label for="roboto-YTDE">Y Transparent Descenders: <span class="axis-tag">(YTDE)</span></label>
                <input type="range" id="roboto-YTDE" min="-305" max="-98" value="-203">
                <span id="roboto-YTDE-value">-203</span>
            </div>
            <div class="control-group">
                <label for="roboto-YTFI">Y Transparent Figures: <span class="axis-tag">(YTFI)</span></label>
                <input type="range" id="roboto-YTFI" min="560" max="788" value="738">
                <span id="roboto-YTFI-value">738</span>
            </div>
        </div>
        </div>

        <!-- Panel footer: favorites + apply/reset -->
        <div class="panel-footer">
            <div class="footer-icons">
                <button id="top-load-favorite" class="favorite-btn" title="Load a saved Top favorite">üìÇ</button>
                <button id="top-save-favorite" class="favorite-btn" title="Save current Top configuration">üíæ</button>
            </div>
            <div class="footer-actions">
                <button id="apply-top" class="apply-btn" title="Apply Serif to page">Apply</button>
                <button id="reset-top" class="reset-btn" title="Reset (clear saved + unset controls)">‚Üª</button>
            </div>
        </div>
    </div>

    <!-- Bottom Font Control Panel -->
    <div id="bottom-font-controls" class="controls-panel">
        <h2>Bottom Font</h2>

        <div class="panel-body">
        <!-- Font Selector -->
        <div class="control-section">
            <h3>Font Selection</h3>
            <div class="control-group">
                <label for="bottom-font-display">Font Family:</label>
                <div class="control-row input-row">
                    <span id="bottom-family-reset" class="family-reset-btn" title="Use site default">‚Üª</span>
                    <div id="bottom-font-display" class="font-family-display" tabindex="0" role="combobox" aria-haspopup="listbox" aria-controls="font-picker-list" aria-expanded="false">Zilla Slab Highlight</div>
                </div>
            </div>
            <!-- Favorites controls moved to persistent footer -->
        </div>

        <!-- Basic Font Properties -->
        <div class="control-section">
            <h3>Basic Properties</h3>
            <div class="control-group unset" data-control="font-size">
                <label for="bottom-font-size">Font Size:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="font-size" title="Reset font size">‚Üª</span>
                    <input type="text" id="bottom-font-size-text" class="size-text-input numeric-trigger" readonly value="17" aria-label="Bottom font size in pixels (e.g., 16 or 16px)" data-type="fontSize" data-position="bottom">
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="bottom-font-size" min="10" max="72" step="0.01" value="17">
                </div>
            </div>
            <div class="control-group unset" data-control="line-height">
                <label for="bottom-line-height">Line Height:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="line-height" title="Reset to default">‚Üª</span>
                    <span id="bottom-line-height-value" class="axis-readonly-input" aria-live="polite">1.6</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="bottom-line-height" min="1" max="3" step="0.1" value="1.6">
                </div>
            </div>
            <div class="control-group unset" data-control="weight">
                <label for="bottom-font-weight">Weight:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="weight" title="Reset weight">‚Üª</span>
                    <span id="bottom-font-weight-value" class="axis-readonly-input" aria-live="polite">400</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="bottom-font-weight" min="100" max="900" step="100" value="400">
                </div>
            </div>
            <div class="control-group">
                <label for="bottom-font-color">Color:</label>
                <select id="bottom-font-color">
                    <option value="#000000" selected>100% Black</option>
                    <option value="#1A1A1A">90% Gray</option>
                    <option value="#333333">80% Gray</option>
                    <option value="#4D4D4D">70% Gray</option>
                    <option value="#666666">60% Gray</option>
                    <option value="#CCCCCC">20% Gray</option>
                    <option value="#FF0000">Bright Red</option>
                </select>
            </div>
        </div>


        <!-- Dynamic Variable Axes -->
        <div id="bottom-axes-section" class="control-section">
            <h3>Variable Axes</h3>
            <div class="control-group">
                <label for="rubik-wght">Weight: <span class="axis-tag">(wght)</span></label>
                <input type="range" id="rubik-wght" min="300" max="900" value="400">
                <span id="rubik-wght-value">400</span>
            </div>
            <div class="control-group">
                <label for="rubik-ital">Italic: <span class="axis-tag">(ital)</span></label>
                <input type="range" id="rubik-ital" min="0" max="1" value="0">
                <span id="rubik-ital-value">0</span>
            </div>
        </div>
        </div>

        <div class="panel-footer">
            <div class="footer-icons">
                <button id="bottom-load-favorite" class="favorite-btn" title="Load a saved Bottom favorite">üìÇ</button>
                <button id="bottom-save-favorite" class="favorite-btn" title="Save current Bottom configuration">üíæ</button>
            </div>
            <div class="footer-actions">
                <button id="apply-bottom" class="apply-btn" title="Apply Sans Serif to page">Apply</button>
                <button id="reset-bottom" class="reset-btn" title="Reset (clear saved + unset controls)">‚Üª</button>
            </div>
        </div>
    </div>

    <!-- Font Comparison Area -->
    <div id="font-comparison">
        <div id="font-preview-rink">
        <!-- Top section -->
        <div class="font-section" id="top-font-section">
            <h3 id="top-font-name">Roboto Flex</h3>
            <p id="top-font-text" style="font-family: 'Roboto Flex', serif; font-weight: 400;">Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this. But, in a larger sense, we can not dedicate‚Äîwe can not consecrate‚Äîwe can not hallow‚Äîthis ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us‚Äîthat from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion‚Äîthat we here highly resolve that these dead shall not have died in vain‚Äîthat this nation, under God, shall have a new birth of freedom‚Äîand that government of the people, by the people, for the people, shall not perish from the earth.</p>
        </div>

        <!-- Horizontal center-line separator (faceoff only) -->
        <div class="center-line-separator"></div>

        <!-- Bottom section -->
        <div class="font-section" id="bottom-font-section">
            <h3 id="bottom-font-name">Rubik</h3>
            <p id="bottom-font-text" style="font-family: 'Rubik', serif; font-weight: 700;">Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this. But, in a larger sense, we can not dedicate‚Äîwe can not consecrate‚Äîwe can not hallow‚Äîthis ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us‚Äîthat from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion‚Äîthat we here highly resolve that these dead shall not have died in vain‚Äîthat this nation, under God, shall have a new birth of freedom‚Äîand that government of the people, by the people, for the people, shall not perish from the earth.</p>
        </div>

        <!-- Body section (Body Contact mode) -->
        <div class="font-section" id="body-font-section">
            <h3 id="body-font-name">Default</h3>
            <p id="body-font-text" style="font-family: 'Roboto Flex', serif; font-weight: 400;">Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this. But, in a larger sense, we can not dedicate‚Äîwe can not consecrate‚Äîwe can not hallow‚Äîthis ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us‚Äîthat from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion‚Äîthat we here highly resolve that these dead shall not have died in vain‚Äîthat this nation, under God, shall have a new birth of freedom‚Äîand that government of the people, by the people, for the people, shall not perish from the earth.</p>
        </div>

        <!-- Serif section (Third Man In mode) -->
        <div class="font-section" id="serif-font-section">
            <h3 id="serif-font-name"></h3>
            <p id="serif-font-text" style="font-family: 'Times New Roman', serif; font-weight: 400;">Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this. But, in a larger sense, we can not dedicate‚Äîwe can not consecrate‚Äîwe can not hallow‚Äîthis ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us‚Äîthat from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion‚Äîthat we here highly resolve that these dead shall not have died in vain‚Äîthat this nation, under God, shall have a new birth of freedom‚Äîand that government of the people, by the people, for the people, shall not perish from the earth.</p>
        </div>

        <div class="blue-line-separator"></div>

        <!-- Sans section (Third Man In mode) -->
        <div class="font-section" id="sans-font-section">
            <h3 id="sans-font-name"></h3>
            <p id="sans-font-text" style="font-family: 'Arial', sans-serif; font-weight: 400;">Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this. But, in a larger sense, we can not dedicate‚Äîwe can not consecrate‚Äîwe can not hallow‚Äîthis ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us‚Äîthat from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion‚Äîthat we here highly resolve that these dead shall not have died in vain‚Äîthat this nation, under God, shall have a new birth of freedom‚Äîand that government of the people, by the people, for the people, shall not perish from the earth.</p>
        </div>

        <div class="blue-line-separator"></div>

        <!-- Mono section (Third Man In mode) -->
        <div class="font-section" id="mono-font-section">
            <h3 id="mono-font-name"></h3>
            <pre id="mono-font-text" style="font-family: 'Courier New', monospace; font-weight: 400; background: #ffffff; color: #000000; padding: 16px; border-radius: 4px; margin: 0; white-space: pre; overflow-x: auto;"><span style="color: #008000; font-style: italic;"># Gettysburg Address Implementation</span>
<span style="color: #0000ff;">class</span> <span style="color: #267f99;">Nation</span>:
    <span style="color: #0000ff;">def</span> <span style="color: #795e26;">__init__</span>(<span style="color: #001080;">self</span>, <span style="color: #001080;">conceived_in</span>=<span style="color: #a31515;">"Liberty"</span>):
        <span style="color: #001080;">self</span>.<span style="color: #001080;">founding_years</span> = <span style="color: #098658;">87</span>  <span style="color: #008000; font-style: italic;"># Four score and seven</span>
        <span style="color: #001080;">self</span>.<span style="color: #001080;">conceived_in</span> = <span style="color: #001080;">conceived_in</span>
        <span style="color: #001080;">self</span>.<span style="color: #001080;">dedicated_to</span> = <span style="color: #a31515;">"all men are created equal"</span>
        <span style="color: #001080;">self</span>.<span style="color: #001080;">is_at_war</span> = <span style="color: #0000ff;">True</span>
        <span style="color: #001080;">self</span>.<span style="color: #001080;">battlefield</span> = <span style="color: #a31515;">"Gettysburg"</span>

    <span style="color: #0000ff;">def</span> <span style="color: #795e26;">dedicate_ground</span>(<span style="color: #001080;">self</span>):
        <span style="color: #a31515;">"""We cannot consecrate this ground"""</span>
        <span style="color: #0000ff;">return</span> <span style="color: #a31515;">"Already consecrated by the brave"</span>

    <span style="color: #0000ff;">def</span> <span style="color: #795e26;">remember_sacrifice</span>(<span style="color: #001080;">self</span>):
        <span style="color: #001080;">fallen_heroes</span> = [<span style="color: #a31515;">"living"</span>, <span style="color: #a31515;">"dead"</span>]
        <span style="color: #0000ff;">for</span> <span style="color: #001080;">hero</span> <span style="color: #0000ff;">in</span> <span style="color: #001080;">fallen_heroes</span>:
            <span style="color: #795e26;">print</span>(<span style="color: #a31515;">f"Honor the </span><span style="color: #0000ff;">{</span><span style="color: #001080;">hero</span><span style="color: #0000ff;">}</span><span style="color: #a31515;"> who struggled here"</span>)
        <span style="color: #0000ff;">return</span> <span style="color: #a31515;">"consecrated far above our poor power"</span>

    <span style="color: #0000ff;">def</span> <span style="color: #795e26;">resolve_for_future</span>(<span style="color: #001080;">self</span>):
        <span style="color: #001080;">unfinished_work</span> = [
            <span style="color: #a31515;">"increased devotion to the cause"</span>,
            <span style="color: #a31515;">"these dead shall not have died in vain"</span>,
            <span style="color: #a31515;">"new birth of freedom"</span>
        ]

        <span style="color: #001080;">government</span> = {
            <span style="color: #a31515;">"of"</span>: <span style="color: #a31515;">"the people"</span>,
            <span style="color: #a31515;">"by"</span>: <span style="color: #a31515;">"the people"</span>,
            <span style="color: #a31515;">"for"</span>: <span style="color: #a31515;">"the people"</span>
        }

        <span style="color: #0000ff;">return</span> <span style="color: #a31515;">f"That </span><span style="color: #0000ff;">{</span><span style="color: #001080;">government</span><span style="color: #0000ff;">}</span><span style="color: #a31515;"> shall not perish"</span>

<span style="color: #008000; font-style: italic;"># Initialize our nation's dedication</span>
<span style="color: #001080;">america</span> = <span style="color: #267f99;">Nation</span>()
<span style="color: #001080;">america</span>.<span style="color: #795e26;">remember_sacrifice</span>()
<span style="color: #795e26;">print</span>(<span style="color: #001080;">america</span>.<span style="color: #795e26;">resolve_for_future</span>())</pre>
        </div>
        </div>

        <!-- Domain Display Rink (Body Contact mode) -->
        <div class="font-section domain-display-rink" id="body-domain-section">
            <div class="domain-rink">
                <div class="domain-bar-left"></div>
                <span id="body-domain-display" class="domain-text">Loading...</span>
                <div class="domain-bar-right"></div>
            </div>
        </div>
    </div>

    <!-- Body Font Control Panel (Body Contact mode) -->
    <div id="body-font-controls" class="controls-panel">
        <h2>Body</h2>

        <div class="panel-body">
        <!-- Font Selector -->
        <div class="control-section">
            <h3>Font Selection</h3>
            <div class="control-group">
                <label for="body-font-display">Font Family:</label>
                <div class="control-row input-row">
                    <span id="body-family-reset" class="family-reset-btn" title="Set family to Default">‚Üª</span>
                    <div id="body-font-display" class="font-family-display" tabindex="0" role="combobox" aria-haspopup="listbox" aria-controls="font-picker-list" aria-expanded="false">Default</div>
                </div>
            </div>
        </div>

        <!-- Basic Font Properties -->
        <div class="control-section">
            <h3>Basic Properties</h3>
            <div class="control-group unset" data-control="font-size">
                <label for="body-font-size">Font Size:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="font-size" title="Reset font size">‚Üª</span>
                    <input type="text" id="body-font-size-text" class="text-input numeric-trigger" readonly value="17" step="0.01" min="6" max="200" data-type="fontSize" data-position="body">
                    <span id="body-font-size-value" class="value-display">17px</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="body-font-size" min="10" max="72" step="0.01" value="17" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="line-height">
                <label for="body-line-height">Line Height:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="line-height" title="Reset line height">‚Üª</span>
                    <input type="text" id="body-line-height-text" class="text-input numeric-trigger" readonly value="1.6" step="0.01" min="0.5" max="3" data-type="lineHeight" data-position="body">
                    <span id="body-line-height-value" class="value-display">1.6</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="body-line-height" min="0.8" max="2.5" step="0.01" value="1.6" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="weight">
                <label for="body-font-weight">Font Weight:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="weight" title="Reset weight">‚Üª</span>
                    <span id="body-font-weight-value" class="axis-readonly-input" aria-live="polite">400</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="body-font-weight" min="100" max="900" step="100" value="400" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="color">
                <label for="body-font-color">Color:</label>
                <div class="control-row input-row">
                    <span id="body-color-reset" class="axis-reset-btn" title="Reset color to Default">‚Üª</span>
                    <select id="body-font-color">
                        <option value="default" selected>Default</option>
                        <option value="#000000">100% Black</option>
                        <option value="#1A1A1A">90% Gray</option>
                        <option value="#333333">80% Gray</option>
                        <option value="#4D4D4D">70% Gray</option>
                        <option value="#666666">60% Gray</option>
                    <option value="#CCCCCC">20% Gray</option>
                    <option value="#FF0000">Bright Red</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Variable Axes (populated dynamically) -->
        <div class="control-section" id="body-variable-axes">
            <h3>Variable Axes</h3>
            <div id="body-axes-container"></div>
        </div>
        </div>

        <!-- Panel Footer with buttons -->
        <div class="panel-footer">
            <div class="panel-buttons">
                <div class="favorites-section">
                    <button id="body-load-favorite-bar" class="favorite-btn" title="Load a saved Body favorite">üìÇ</button>
                    <button id="body-save-favorite-bar" class="favorite-btn" title="Save current Body configuration">üíæ</button>
                    <button id="apply-body" class="apply-btn" style="display: none;">Apply</button>
                    <button id="reset-body" class="reset-btn" style="display: none;">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Serif Font Control Panel (Third Man In mode) -->
    <div id="serif-font-controls" class="controls-panel">
        <h2>Serif</h2>

        <div class="panel-body">
        <!-- Font Selector -->
        <div class="control-section">
            <h3>Font Selection</h3>
            <div class="control-group">
                <label for="serif-font-display">Font Family:</label>
                <div class="control-row input-row">
                    <span id="serif-family-reset" class="family-reset-btn" title="Set family to Default">‚Üª</span>
                    <div id="serif-font-display" class="font-family-display" tabindex="0" role="combobox" aria-haspopup="listbox" aria-controls="font-picker-list" aria-expanded="false">Default</div>
                </div>
            </div>
        </div>

        <!-- Basic Font Properties -->
        <div class="control-section">
            <h3>Basic Properties</h3>
            <div class="control-group unset" data-control="font-size">
                <label for="serif-font-size">Font Size:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="font-size" title="Reset font size">‚Üª</span>
                    <input type="text" id="serif-font-size-text" class="text-input numeric-trigger" readonly value="17" step="0.01" min="6" max="200" data-type="fontSize" data-position="serif">
                    <span id="serif-font-size-value" class="value-display">17px</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="serif-font-size" min="10" max="72" step="0.01" value="17" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="line-height">
                <label for="serif-line-height">Line Height:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="line-height" title="Reset line height">‚Üª</span>
                    <input type="text" id="serif-line-height-text" class="text-input numeric-trigger" readonly value="1.6" step="0.01" min="0.5" max="3" data-type="lineHeight" data-position="serif">
                    <span id="serif-line-height-value" class="value-display">1.6</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="serif-line-height" min="0.8" max="2.5" step="0.01" value="1.6" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="weight">
                <label for="serif-font-weight">Font Weight:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="weight" title="Reset weight">‚Üª</span>
                    <span id="serif-font-weight-value" class="axis-readonly-input" aria-live="polite">400</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="serif-font-weight" min="100" max="900" step="100" value="400" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="color">
                <label for="serif-font-color">Color:</label>
                <div class="control-row input-row">
                    <span id="serif-color-reset" class="axis-reset-btn" title="Reset color to Default">‚Üª</span>
                    <select id="serif-font-color">
                        <option value="default" selected>Default</option>
                        <option value="#000000">100% Black</option>
                        <option value="#1A1A1A">90% Gray</option>
                        <option value="#333333">80% Gray</option>
                        <option value="#4D4D4D">70% Gray</option>
                        <option value="#666666">60% Gray</option>
                        <option value="#CCCCCC">20% Gray</option>
                        <option value="#FF0000">Bright Red</option>
                    </select>
                </div>
            </div>
        </div>


        <!-- Variable Axes (populated dynamically) -->
        <div class="control-section" id="serif-variable-axes">
            <h3>Variable Axes</h3>
            <div id="serif-axes-container"></div>
        </div>
        </div>

        <!-- Panel Footer with buttons -->
        <div class="panel-footer">
            <div class="footer-icons">
                <button id="serif-load-favorite-bar" class="favorite-btn" title="Load a saved Serif favorite">üìÇ</button>
                <button id="serif-save-favorite-bar" class="favorite-btn" title="Save current Serif configuration">üíæ</button>
            </div>
            <div class="footer-actions">
                <button id="apply-serif" class="apply-btn" style="display: none;">Apply All</button>
                <button id="reset-serif" class="reset-btn" style="display: none;">Reset All</button>
            </div>
        </div>
    </div>

    <!-- Mono Font Control Panel (Third Man In mode) -->
    <div id="mono-font-controls" class="controls-panel">
        <h2>Mono</h2>

        <div class="panel-body">
        <!-- Font Selector -->
        <div class="control-section">
            <h3>Font Selection</h3>
            <div class="control-group">
                <label for="mono-font-display">Font Family:</label>
                <div class="control-row input-row">
                    <span id="mono-family-reset" class="family-reset-btn" title="Set family to Default">‚Üª</span>
                    <div id="mono-font-display" class="font-family-display" tabindex="0" role="combobox" aria-haspopup="listbox" aria-controls="font-picker-list" aria-expanded="false">Default</div>
                </div>
            </div>
        </div>

        <!-- Basic Font Properties -->
        <div class="control-section">
            <h3>Basic Properties</h3>
            <div class="control-group unset" data-control="font-size">
                <label for="mono-font-size">Font Size:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="font-size" title="Reset font size">‚Üª</span>
                    <input type="text" id="mono-font-size-text" class="text-input numeric-trigger" readonly value="17" step="0.01" min="6" max="200" data-type="fontSize" data-position="mono">
                    <span id="mono-font-size-value" class="value-display">17px</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="mono-font-size" min="10" max="72" step="0.01" value="17" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="line-height">
                <label for="mono-line-height">Line Height:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="line-height" title="Reset line height">‚Üª</span>
                    <input type="text" id="mono-line-height-text" class="text-input numeric-trigger" readonly value="1.6" step="0.01" min="0.5" max="3" data-type="lineHeight" data-position="mono">
                    <span id="mono-line-height-value" class="value-display">1.6</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="mono-line-height" min="0.8" max="2.5" step="0.01" value="1.6" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="weight">
                <label for="mono-font-weight">Font Weight:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="weight" title="Reset weight">‚Üª</span>
                    <span id="mono-font-weight-value" class="axis-readonly-input" aria-live="polite">400</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="mono-font-weight" min="100" max="900" step="100" value="400" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="color">
                <label for="mono-font-color">Color:</label>
                <div class="control-row input-row">
                    <span id="mono-color-reset" class="axis-reset-btn" title="Reset color to Default">‚Üª</span>
                    <select id="mono-font-color">
                        <option value="default" selected>Default</option>
                        <option value="#000000">100% Black</option>
                        <option value="#1A1A1A">90% Gray</option>
                        <option value="#333333">80% Gray</option>
                        <option value="#4D4D4D">70% Gray</option>
                        <option value="#666666">60% Gray</option>
                        <option value="#CCCCCC">20% Gray</option>
                        <option value="#FF0000">Bright Red</option>
                    </select>
                </div>
            </div>
        </div>


        <!-- Variable Axes (populated dynamically) -->
        <div class="control-section" id="mono-variable-axes">
            <h3>Variable Axes</h3>
            <div id="mono-axes-container"></div>
        </div>
        </div>

        <!-- Panel Footer with buttons -->
        <div class="panel-footer">
            <div class="footer-icons">
                <button id="mono-load-favorite-bar" class="favorite-btn" title="Load a saved Mono favorite">üìÇ</button>
                <button id="mono-save-favorite-bar" class="favorite-btn" title="Save current Mono configuration">üíæ</button>
            </div>
            <div class="footer-actions">
                <button id="apply-mono" class="apply-btn" style="display: none;">Apply All</button>
                <button id="reset-mono" class="reset-btn" style="display: none;">Reset All</button>
            </div>
        </div>
    </div>

    <!-- Sans Font Control Panel (Third Man In mode) -->
    <div id="sans-font-controls" class="controls-panel">
        <h2>Sans</h2>

        <div class="panel-body">
        <!-- Font Selector -->
        <div class="control-section">
            <h3>Font Selection</h3>
            <div class="control-group">
                <label for="sans-font-display">Font Family:</label>
                <div class="control-row input-row">
                    <span id="sans-family-reset" class="family-reset-btn" title="Set family to Default">‚Üª</span>
                    <div id="sans-font-display" class="font-family-display" tabindex="0" role="combobox" aria-haspopup="listbox" aria-controls="font-picker-list" aria-expanded="false">Default</div>
                </div>
            </div>
        </div>

        <!-- Basic Font Properties -->
        <div class="control-section">
            <h3>Basic Properties</h3>
            <div class="control-group unset" data-control="font-size">
                <label for="sans-font-size">Font Size:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="font-size" title="Reset font size">‚Üª</span>
                    <input type="text" id="sans-font-size-text" class="text-input numeric-trigger" readonly value="17" step="0.01" min="6" max="200" data-type="fontSize" data-position="sans">
                    <span id="sans-font-size-value" class="value-display">17px</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="sans-font-size" min="10" max="72" step="0.01" value="17" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="line-height">
                <label for="sans-line-height">Line Height:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="line-height" title="Reset line height">‚Üª</span>
                    <input type="text" id="sans-line-height-text" class="text-input numeric-trigger" readonly value="1.6" step="0.01" min="0.5" max="3" data-type="lineHeight" data-position="sans">
                    <span id="sans-line-height-value" class="value-display">1.6</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="sans-line-height" min="0.8" max="2.5" step="0.01" value="1.6" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="weight">
                <label for="sans-font-weight">Font Weight:</label>
                <div class="control-row input-row">
                    <span class="axis-reset-btn" data-control="weight" title="Reset weight">‚Üª</span>
                    <span id="sans-font-weight-value" class="axis-readonly-input" aria-live="polite">400</span>
                </div>
                <div class="control-row slider-row">
                    <input type="range" id="sans-font-weight" min="100" max="900" step="100" value="400" class="slider-input">
                </div>
            </div>
            <div class="control-group unset" data-control="color">
                <label for="sans-font-color">Color:</label>
                <div class="control-row input-row">
                    <span id="sans-color-reset" class="axis-reset-btn" title="Reset color to Default">‚Üª</span>
                    <select id="sans-font-color">
                        <option value="default" selected>Default</option>
                        <option value="#000000">100% Black</option>
                        <option value="#1A1A1A">90% Gray</option>
                        <option value="#333333">80% Gray</option>
                        <option value="#4D4D4D">70% Gray</option>
                        <option value="#666666">60% Gray</option>
                        <option value="#CCCCCC">20% Gray</option>
                        <option value="#FF0000">Bright Red</option>
                    </select>
                </div>
            </div>
        </div>


        <!-- Variable Axes (populated dynamically) -->
        <div class="control-section" id="sans-variable-axes">
            <h3>Variable Axes</h3>
            <div id="sans-axes-container"></div>
        </div>
        </div>

        <!-- Panel Footer with buttons -->
        <div class="panel-footer">
            <div class="footer-icons">
                <button id="sans-load-favorite-bar" class="favorite-btn" title="Load a saved Sans favorite">üìÇ</button>
                <button id="sans-save-favorite-bar" class="favorite-btn" title="Save current Sans configuration">üíæ</button>
            </div>
            <div class="footer-actions">
                <button id="apply-sans" class="apply-btn" style="display: none;">Apply All</button>
                <button id="reset-sans" class="reset-btn" style="display: none;">Reset All</button>
            </div>
        </div>
    </div>

    <script src="popup.js"></script>

    <!-- Font Picker Modal -->
    <div id="font-picker-modal" class="font-picker-modal">
        <div class="font-picker-content">
            <div class="font-picker-header">
                <h3 id="font-picker-title">Select Font</h3>
                <button id="font-picker-close" class="popup-close">&times;</button>
            </div>
            <div class="font-picker-toolbar">
                <input type="text" id="font-picker-search" class="font-picker-search" placeholder="Search fonts..." aria-label="Search fonts">
            </div>
            <div class="font-picker-body">
                <div id="font-picker-list" class="font-picker-list" role="listbox" aria-label="Font list"></div>
                <div id="font-picker-rail" class="font-picker-rail" aria-label="Alphabet navigation"></div>
            </div>
        </div>
    </div>

    <!-- Mode Switch Confirmation Modal -->
    <div id="mode-switch-modal" class="save-modal">
        <div class="save-modal-content">
            <div class="save-modal-header">
                <h3>Switch Mode</h3>
                <button id="mode-switch-modal-close" class="save-modal-close">&times;</button>
            </div>
            <div class="save-modal-body">
                <p id="mode-switch-message">Switching modes will reset your saved domain settings. Continue?</p>
            </div>
            <div class="save-modal-footer">
                <button id="mode-switch-cancel" class="save-modal-btn cancel-btn">Cancel</button>
                <button id="mode-switch-continue" class="save-modal-btn save-btn">Continue</button>
            </div>
        </div>
    </div>

    <!-- Numeric Input Modal -->
    <div id="numeric-modal" class="modal">
        <div class="modal-content numeric-modal-content">
            <div class="numeric-modal-header">
                <h3 id="numeric-modal-title">Enter Value</h3>
                <button id="numeric-modal-close" class="modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="numeric-modal-body">
                <div class="numeric-display">
                    <input type="text" id="numeric-input" readonly class="numeric-input-display">
                </div>
                <div class="numeric-keypad">
                    <button class="numeric-btn" data-value="7">7</button>
                    <button class="numeric-btn" data-value="8">8</button>
                    <button class="numeric-btn" data-value="9">9</button>
                    <button class="numeric-btn numeric-backspace" data-action="backspace">‚å´</button>
                    <button class="numeric-btn" data-value="4">4</button>
                    <button class="numeric-btn" data-value="5">5</button>
                    <button class="numeric-btn" data-value="6">6</button>
                    <button class="numeric-btn numeric-enter" data-action="apply">
                        <div class="enter-content">
                            <div class="enter-arrow">‚Üµ</div>
                            <div class="enter-text">Enter</div>
                        </div>
                    </button>
                    <button class="numeric-btn" data-value="1">1</button>
                    <button class="numeric-btn" data-value="2">2</button>
                    <button class="numeric-btn" data-value="3">3</button>
                    <button class="numeric-btn numeric-enter-bottom" data-action="apply">‚Üµ</button>
                    <button class="numeric-btn numeric-zero" data-value="0">0</button>
                    <button class="numeric-btn" data-value=".">.</button>
                    <button class="numeric-btn numeric-enter-final" data-action="apply">‚Üµ</button>
                </div>
                <div class="numeric-actions">
                    <button id="numeric-apply" class="numeric-action-btn apply-btn">Apply</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
