<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>A Font Face-off — Options</title>
  <link rel="stylesheet" type="text/css" href="settings.css" />
  <style>
    /* Hockey Theme Override */
    :root {
      --background-color: #e8f1ff !important; /* Very light blue ice */
      --box-background: #d1e5ff !important; /* Slightly darker blue for contrast */
      --tab-background: white !important; /* White ice color like popup */
      --text-color: #1e40af !important; /* Dark blue text */
      --primary-color: #46b !important; /* Hockey blue like popup */
      --secondary-color: #c33 !important; /* Hockey red like popup */
      --link-color: #3730a3 !important; /* Darker blue for links */
      --rink-border: #46b; /* Blue rink border like popup */
    }
    
    @media (prefers-color-scheme: dark) {
      :root {
        --background-color: #1e3a5f !important; /* Dark blue ice */
        --box-background: #2d4a6b !important; /* Darker blue for contrast */
        --tab-background: white !important; /* Keep white ice even in dark mode like popup */
        --text-color: #1e40af !important; /* Keep dark blue text on white background */
        --primary-color: #46b !important; /* Same hockey blue */
        --secondary-color: #c33 !important; /* Same hockey red */
        --link-color: #a5b4fc !important; /* Lighter blue for links in dark areas */
        --rink-border: #46b; /* Same blue rink border */
      }
    }

    /* Hockey Rink Tab Bar */
    #settingsTabs {
      position: relative;
      border: 2px solid var(--rink-border) !important; /* Match popup border thickness */
      border-radius: 8px !important; /* Less rounded, more rink-like */
      /* Use background-color so we don't reset background-image layers */
      background-color: var(--tab-background) !important;
      overflow: visible; /* Allow creases to show */
      height: 60px; /* Match popup tab height */
    }
    
    /* Main tab bar styling (no layered images; we use elements like popup) */
    #settingsTabs {
      background-color: var(--tab-background);
    }

    /* Center dotted red line (same as popup .center-line) */
    #settingsTabs .center-line {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 100%;
      background: repeating-linear-gradient(
        to bottom,
        #c33 0px,
        #c33 6px,
        transparent 6px,
        transparent 12px
      ) !important;
      z-index: 2;
    }

    /* Goal lines (same as popup) */
    #settingsTabs .goal-line-left,
    #settingsTabs .goal-line-right {
      position: absolute;
      top: 0;
      width: 2px;
      height: 100%;
      background: #c33 !important; /* explicit red like popup */
      z-index: 1;
    }
    #settingsTabs .goal-line-left { left: 18px; }
    #settingsTabs .goal-line-right { right: 18px; }

    /* Goal creases (same as popup) */
    #settingsTabs .goal-crease-left,
    #settingsTabs .goal-crease-right {
      position: absolute;
      top: 50%;
      width: 15px;
      height: 30px;
      transform: translateY(-50%);
      border: 2px solid #c33 !important; /* explicit red like popup */
      background: transparent;
      z-index: 2;
    }
    #settingsTabs .goal-crease-left {
      left: 18px; border-left: none; border-radius: 0 15px 15px 0;
    }
    #settingsTabs .goal-crease-right {
      right: 18px; border-right: none; border-radius: 15px 0 0 15px;
    }

    /* Goal box rectangles (same as popup) */
    #settingsTabs .goal-box-left,
    #settingsTabs .goal-box-right {
      position: absolute;
      top: 50%;
      width: 10px;
      height: 20px;
      transform: translateY(-50%);
      border: 2px solid #c33 !important; /* explicit red like popup */
      background: transparent;
      z-index: 2;
    }
    #settingsTabs .goal-box-left { left: 10px; border-radius: 6px 0 0 6px; }
    #settingsTabs .goal-box-right { right: 10px; border-radius: 0 6px 6px 0; }

    /* Faceoff circle & dot (same as popup dimensions) */
    #settingsTabs .faceoff-circle {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 40px;
      height: 40px;
      border: 3px solid var(--primary-color);
      border-radius: 50%;
      background: #ffffff; /* white ice inside the circle */
      transform: translate(-50%, -50%);
      z-index: 1;
    }
    #settingsTabs .faceoff-dot {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: var(--primary-color);
      font-size: 18px;
      font-weight: bold;
      z-index: 2;
      line-height: 1;
      pointer-events: none;
    }
    
    
    /* Tab styling to work with rink theme (scope only to tab labels) */
    #settingsTabs > div#generalTab,
    #settingsTabs > div#excludeTab {
      position: relative;
      z-index: 3;
      background: transparent !important;
      border: none !important;
      border-radius: 0 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      height: 100% !important;
    }
    
    /* Decorative rink elements should not intercept clicks */
    #settingsTabs .center-line,
    #settingsTabs .goal-line-left,
    #settingsTabs .goal-line-right,
    #settingsTabs .goal-crease-left,
    #settingsTabs .goal-crease-right,
    #settingsTabs .goal-box-left,
    #settingsTabs .goal-box-right,
    #settingsTabs .faceoff-circle,
    #settingsTabs .faceoff-dot { pointer-events: none; }

    /* Neutralize generic tab div borders from settings.css on line elements only */
    #settingsTabs .center-line,
    #settingsTabs .goal-line-left,
    #settingsTabs .goal-line-right { border: none !important; }
    
    
    /* Active tab highlighting with blue tint like popup */
    #settingsTabs div.active {
      background: rgba(0, 51, 160, 0.15) !important; /* Light blue tint like popup */
      color: var(--primary-color) !important; /* Hockey blue like popup */
      font-weight: 700 !important;
      position: relative;
    }

    /* Ensure tab labels appear above rink decor */
    
    /* Shorter red bar at bottom like popup - using pseudo-element */
    #settingsTabs div.active::after {
      content: '';
      position: absolute;
      bottom: 2px;
      left: 50%;
      width: 20px;
      height: 3px;
      background: var(--secondary-color);
      transform: translateX(-50%);
      border-radius: 1.5px;
      z-index: 6;
    }
    

    /* Left toolbar preview theme matching left-toolbar-iframe.html */
    #left-toolbar-preview {
      --toolbar-background: #2b2a33;
      --icon-color: #fbfbfe;
      --primary-color: 137, 180, 250;
    }
    
    @media (prefers-color-scheme: light) {
      #left-toolbar-preview {
        --toolbar-background: #f9f9fb;
        --icon-color: #15141a;
        --primary-color: 137, 180, 250;
      }
    }
    
    #left-toolbar-preview .preview-button {
      color: var(--icon-color);
    }
    
    /* Slight blue tint for Face-off and WhatFont buttons in preview */
    #left-toolbar-preview .preview-button:nth-child(1),
    #left-toolbar-preview .preview-button:nth-child(2) {
      color: rgb(var(--primary-color));
    }
  </style>
</head>
<body>
  <div id="header">
    <h2>
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
        <defs>
          <!-- Clipping mask for left half -->
          <clipPath id="leftHalf">
            <rect x="0" y="0" width="12" height="24"/>
          </clipPath>
          <!-- Clipping mask for right half -->
          <clipPath id="rightHalf">
            <rect x="12" y="0" width="12" height="24"/>
          </clipPath>
        </defs>
        <!-- Left stick (secondary color - red) -->
        <path d="M4 3 L7 19" stroke="#e64553"/>
        <path d="M7 19 L10.6 21" stroke="#e64553"/>
        <!-- Right stick (primary color - blue) -->
        <path d="M20 3 L17 19" stroke="#1e66f5"/>
        <path d="M17 19 L13.4 21" stroke="#1e66f5"/>
        <!-- Full mask outline clipped to left half (primary blue) -->
        <path d="M12 5.0c-2.6 0-3.9 2.0-3.9 3.8 0 2.5 1.6 4.9 3.9 5.4 2.3-.5 3.9-2.9 3.9-5.4 0-1.8-1.3-3.8-3.9-3.8Z" stroke="#1e66f5" fill="none" clip-path="url(#leftHalf)"/>
        <!-- Full mask outline clipped to right half (secondary red) -->
        <path d="M12 5.0c-2.6 0-3.9 2.0-3.9 3.8 0 2.5 1.6 4.9 3.9 5.4 2.3-.5 3.9-2.9 3.9-5.4 0-1.8-1.3-3.8-3.9-3.8Z" stroke="#e64553" fill="none" clip-path="url(#rightHalf)"/>
        <!-- Eyes (left blue, right red) -->
        <circle cx="10" cy="8.8" r="0.8" fill="#1e66f5" stroke="none"/>
        <circle cx="14" cy="8.8" r="0.8" fill="#e64553" stroke="none"/>
        <!-- Vents (center half blue/half red, left blue, right red) -->
        <circle cx="12" cy="12.0" r="0.5" fill="#1e66f5" stroke="none" clip-path="url(#leftHalf)"/>
        <circle cx="12" cy="12.0" r="0.5" fill="#e64553" stroke="none" clip-path="url(#rightHalf)"/>
        <circle cx="10.7" cy="12.0" r="0.5" fill="#1e66f5" stroke="none"/>
        <circle cx="13.3" cy="12.0" r="0.5" fill="#e64553" stroke="none"/>
        <!-- Puck (black) -->
        <ellipse cx="12" cy="18.2" rx="2.8" ry="1.1" fill="black" stroke="none"/>
      </svg>
      A Font Face-off — Options
    </h2>
  </div>
  
  <div id="settingsTabs">
    <div class="center-line"></div>
    <div class="goal-line-left"></div>
    <div class="goal-line-right"></div>
    <div class="goal-crease-left"></div>
    <div class="goal-crease-right"></div>
    <div class="goal-box-left"></div>
    <div class="goal-box-right"></div>
    <span class="faceoff-circle" aria-hidden="true"></span>
    <span class="faceoff-dot" aria-hidden="true">●</span>
    <div id="generalTab">Toolbar</div>
    <div id="excludeTab">Advanced</div>
  </div>

  <div id="generalSettings">
    <label style="font-size: 16px; font-weight: bold; color: var(--text-color);">Toolbar Settings</label>
    
    <div id="left-toolbar-preview" style="position: fixed; left: 0px; top: 20%; width: 48px; height: 20vh; z-index: 1000; pointer-events: none; 
         border-radius: 8px; opacity: 0.8; display: flex; flex-direction: column; justify-content: space-between; align-items: center; 
         padding: 20px 0; box-sizing: border-box; transform: translateY(-50%);
         background: transparent; color: var(--icon-color);">
      
      <!-- Face-off button -->
      <div class="preview-button" style="aspect-ratio: 1; border: none; border-radius: 20%; background: transparent; 
           display: flex; align-items: center; justify-content: center; color: var(--icon-color, #fbfbfe); margin: 4px 0;">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" background="transparent" class="heroIcons">
          <path d="M4 3 L7 19"/>
          <path d="M7 19 L10.6 21"/>
          <path d="M20 3 L17 19"/>
          <path d="M17 19 L13.4 21"/>
          <path d="M12 5.0c-2.6 0-3.9 2.0-3.9 3.8 0 2.5 1.6 4.9 3.9 5.4 2.3-.5 3.9-2.9 3.9-5.4 0-1.8-1.3-3.8-3.9-3.8Z"/>
          <circle cx="10" cy="8.8" r="0.8" fill="currentColor" stroke="none"/>
          <circle cx="14" cy="8.8" r="0.8" fill="currentColor" stroke="none"/>
          <circle cx="12" cy="12.0" r="0.5" fill="currentColor" stroke="none"/>
          <circle cx="10.7" cy="12.0" r="0.5" fill="currentColor" stroke="none"/>
          <circle cx="13.3" cy="12.0" r="0.5" fill="currentColor" stroke="none"/>
          <ellipse cx="12" cy="18.2" rx="2.8" ry="1.1" fill="currentColor" stroke="none"/>
        </svg>
      </div>
      
      <!-- WhatFont button -->
      <div class="preview-button" style="aspect-ratio: 1; border: none; border-radius: 20%; background: transparent; 
           display: flex; align-items: center; justify-content: center; color: var(--icon-color, #fbfbfe); margin: 4px 0;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </div>
      
      <!-- Close Tab button -->
      <div class="preview-button" style="aspect-ratio: 1; border: none; border-radius: 20%; background: transparent; 
           display: flex; align-items: center; justify-content: center; color: var(--icon-color, #fbfbfe); margin: 4px 0;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </div>
      
      <!-- Page Up button -->
      <div class="preview-button" style="aspect-ratio: 1; border: none; border-radius: 20%; background: transparent; 
           display: flex; align-items: center; justify-content: center; color: var(--icon-color, #fbfbfe); margin: 4px 0;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="17 11 12 6 7 11"></polyline>
          <polyline points="17 18 12 13 7 18"></polyline>
        </svg>
      </div>
      
      <!-- Page Down button -->
      <div class="preview-button" style="aspect-ratio: 1; border: none; border-radius: 20%; background: transparent; 
           display: flex; align-items: center; justify-content: center; color: var(--icon-color, #fbfbfe); margin: 4px 0;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="7 13 12 18 17 13"></polyline>
          <polyline points="7 6 12 11 17 6"></polyline>
        </svg>
      </div>
    </div>
    
    <label for="toolbar-enabled">Left Toolbar Enabled?</label>
    <select id="toolbar-enabled">
        <option value="true">Enabled</option>
        <option value="false">Disabled</option>
    </select>
    
    <label for="toolbar-width">Width (px):</label>
    <span id="toolbar-width-value" class="currentValue">36px</span>
    <input type="range" id="toolbar-width" min="24" max="80" value="36">
    <br />
    
    <label for="toolbar-height">Height (%):</label>
    <span id="toolbar-height-value" class="currentValue">20%</span>
    <input type="range" id="toolbar-height" min="10" max="80" value="20">
    <br />
    
    <label for="toolbar-position">Position (%):</label>
    <span id="toolbar-position-value" class="currentValue">50%</span>
    <input type="range" id="toolbar-position" min="0" max="100" value="50">
    <br />
    
    <label for="toolbar-transparency">Transparency:</label>
    <span id="toolbar-transparency-value" class="currentValue">0.2</span>
    <input type="range" id="toolbar-transparency" min="0" max="1" step="0.1" value="0.2">
    <br />
    
    <label for="toolbar-gap">Gap from edge (px):</label>
    <span id="toolbar-gap-value" class="currentValue">0px</span>
    <input type="range" id="toolbar-gap" min="0" max="20" value="0">
    <br />
    
    <label for="pageup-scroll-overlap">Page Up/Down scroll overlap (px):</label>
    <span id="pageup-scroll-overlap-value" class="currentValue">80px</span>
    <input type="range" id="pageup-scroll-overlap" min="0" max="200" step="10" value="80">
    <br />
    
    <label for="pageup-longpress-overlap">Page Up/Down scroll overlap longpress (px):</label>
    <span id="pageup-longpress-overlap-value" class="currentValue">60px</span>
    <input type="range" id="pageup-longpress-overlap" min="0" max="200" step="10" value="60">
    <br />
    
    <label for="pageup-scroll-type">Page Up/Down scroll type:</label>
    <select id="pageup-scroll-type">
        <option value="smooth">Smooth</option>
        <option value="instant">Instant</option>
    </select>
    <br />
    
    <label for="icon-theme">Icon theme:</label>
    <select id="icon-theme">
        <option value="featherIcons">Feather</option>
        <option value="heroIcons">Heroicons</option>
    </select>
    <br />
    
    <div class="row">
      <button id="save-toolbar">Save Toolbar Settings</button>
      <span id="status-toolbar" class="status"></span>
    </div>
    <div class="hint">Shows a floating vertical toolbar on the left side of web pages with Face-off, WhatFont, and navigation buttons. Position controls vertical centering. Page Up/Down buttons support longpress for different scroll distances.</div>
  </div>

  <div id="excludeSettings" style="display: none;">
    <div class="section">
      <div class="section-title">Known Serif Family Names</div>
      <label for="known-serif">Classification</label>
      <textarea id="known-serif" placeholder="One family per line, case-insensitive. Example:\nPT Serif"></textarea>
      <div class="row">
        <button id="reset-serif">Reset to Default</button>
        <button id="save-serif">Save Serif List</button>
        <span id="status-serif" class="status"></span>
      </div>
      <div class="hint">Used to help classify a page's base typeface as serif. Does not prevent Facade from changing fonts. Default includes PT Serif.</div>
    </div>

    <div class="section">
      <div class="section-title">Known Sans Family Names</div>
      <label for="known-sans">Classification</label>
      <textarea id="known-sans" placeholder="One family per line, case-insensitive."></textarea>
      <div class="row">
        <button id="reset-sans">Reset to Default</button>
        <button id="save-sans">Save Sans List</button>
        <span id="status-sans" class="status"></span>
      </div>
      <div class="hint">Used to help classify a page's base typeface as sans-serif. Does not prevent Facade from changing fonts.</div>
    </div>

    <div class="section">
      <div class="section-title">FontFace-only Domains</div>
      <textarea id="ff-only-domains" placeholder="One domain per line (e.g., x.com)"></textarea>
      <div class="row">
        <button id="reset-ffonly">Reset to Default</button>
        <button id="save-ffonly">Save Domains</button>
        <span id="status-ffonly" class="status"></span>
      </div>
      <div class="hint">On these domains, the extension loads fonts via FontFace only (no css2 @import or &lt;link&gt;), to avoid strict CSP blocks. Default: x.com.</div>
    </div>

    <div class="section">
      <div class="section-title">Inline Apply Domains</div>
      <textarea id="inline-domains" placeholder="One domain per line (e.g., x.com)"></textarea>
      <div class="row">
        <button id="reset-inline">Reset to Default</button>
        <button id="save-inline">Save Domains</button>
        <span id="status-inline" class="status"></span>
      </div>
      <div class="hint">On these domains, apply fonts via inline styles to resist CSP and SPA overrides. Default: x.com.</div>
    </div>

    <div class="section">
      <div class="section-title">Font Cache Management</div>
      <div class="row">
        <button id="clear-font-cache" class="purple">Clear Font Cache</button>
        <button id="view-cache-info">View Cache Info</button>
        <span id="status-cache" class="status"></span>
      </div>
      <div class="hint">Font cache stores downloaded fonts for faster loading on x.com and other FontFace-only domains. Cache expires after 1 year.</div>
    </div>

    <div class="section">
      <div class="section-title">Reset All Local Settings</div>
      <div class="row">
        <button id="reset-all-settings" class="danger">Reset All Local Settings</button>
        <span id="status-reset-all" class="status"></span>
      </div>
      <div class="hint">⚠️ This will clear all extension data including applied fonts, saved configurations, and custom settings. This action cannot be undone.</div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>
